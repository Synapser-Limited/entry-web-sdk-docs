<!DOCTYPE html>
<html lang="{{ site.lang | default: "en-US" }}">
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}">
    <!-- Mermaid JS for diagram rendering -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>
      mermaid.initialize({
        startOnLoad: true,
        theme: 'default',
        securityLevel: 'loose',
        flowchart: { useMaxWidth: true, htmlLabels: true }
      });
    </script>
    <style>
      /* Mermaid diagram styling */
      .mermaid {
        background: #f8f9fa;
        padding: 1rem;
        border-radius: 8px;
        margin: 1rem 0;
        overflow-x: auto;
      }
      pre code.language-mermaid {
        background: transparent;
        padding: 0;
      }
    </style>
    {% seo %}
    <title>{{ page.title | default: site.title }}</title>
  </head>

  <body>
    <header class="page-header" role="banner">
      <h1 class="project-name">{{ page.title | default: site.title }}</h1>
      <h2 class="project-tagline">{{ page.description | default: site.description }}</h2>
    </header>

    <main id="content" class="main-content" role="main">
      {{ content }}

      <footer class="site-footer">
        <span class="site-footer-credits">Entry Web SDK by <a href="https://synapser.com">Synapser Limited</a></span>
      </footer>
    </main>

    <!-- Convert mermaid code blocks after page load -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // Find all code blocks with language-mermaid class
        document.querySelectorAll('pre code.language-mermaid, pre > code').forEach(function(codeBlock) {
          const code = codeBlock.textContent;
          if (code.trim().startsWith('graph') || 
              code.trim().startsWith('sequenceDiagram') || 
              code.trim().startsWith('flowchart') ||
              code.trim().startsWith('classDiagram') ||
              code.trim().startsWith('stateDiagram') ||
              code.trim().startsWith('erDiagram') ||
              code.trim().startsWith('journey') ||
              code.trim().startsWith('gantt') ||
              code.trim().startsWith('pie') ||
              code.trim().startsWith('gitGraph')) {
            const pre = codeBlock.parentElement;
            const div = document.createElement('div');
            div.className = 'mermaid';
            div.textContent = code;
            pre.parentNode.replaceChild(div, pre);
          }
        });
        // Re-run mermaid to render the new divs
        mermaid.init(undefined, '.mermaid');
      });
    </script>
  </body>
</html>
